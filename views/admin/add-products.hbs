<section>
  <div class="container">
    <div class="row">
      <div class="col mt-3">
        <h2 class="text-center">Add Products</h2>
        <form action="/admin/addproducts" method="post" enctype="multipart/form-data">
          <!-- Name Input -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" id="name" name="name" class="form-control" required />
          </div>

          <!-- Category Input -->
          <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <input type="text" id="category" name="category" class="form-control" required />
          </div>

          <!-- Price Input -->
          <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input type="number" id="price" name="price" class="form-control" step="0.01" required />
          </div>

          <!-- Quantity Input -->
          <div class="mb-3">
            <label for="quantity" class="form-label">Quantity</label>
            <input type="number" id="quantity" name="quantity" class="form-control" min="1" required />
          </div>

          <!-- Description Input -->
          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea id="description" name="description" class="form-control" rows="4"></textarea>
          </div>

          <!-- File Upload Input -->
          <div class="mb-3">
            <label for="image" class="form-label">Upload Product Image</label>
            <input
              type="file"
              id="image"
              name="image"
              class="form-control"
              accept="image/*"
              onchange="previewImage(event)"
              required
            />
          </div>

          <!-- Image Preview -->
          <div class="mb-3">
            <label for="image-preview" class="form-label">Image Preview</label>
            <img
              id="image-preview"
              src=""
              alt="Image Preview"
              style="max-width: 300px; display: none;"
            />
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-success mt-3">Submit</button>
        </form>
      </div>
    </div>
  </div>
</section>

<script>
  function previewImage(event) {
    const file = event.target.files[0]; // Get the selected file
    const preview = document.getElementById('image-preview'); // Get the preview image element

    // Check if the selected file is an image
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader(); // Create a FileReader instance

      reader.onload = function(e) {
        preview.style.display = 'block'; // Show the preview image
        preview.src = e.target.result; // Set the preview image source to the file data
      };

      reader.readAsDataURL(file); // Read the file as a Data URL
    } else {
      preview.style.display = 'none'; // Hide preview if the file is not valid
      preview.src = ''; // Clear the preview image source
      alert("Please select a valid image file."); // Show error message
    }
  }
</script>
